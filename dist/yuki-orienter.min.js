/**
 * yuki-orienter v0.1.0
 * (c) 2017 Limichange
 * @license MIT
 */
!function(a,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):a.YukiOrienter=n()}(this,function(){"use strict";var a=function(a){void 0===a&&(a={});var n=this;n.initDefaultOptions(),n.bindEvent(),Object.assign(this,a)};return a.prototype.initDefaultOptions=function(){var a=this;switch(a.lon=0,a.lat=0,a.direction=window.orientation||0,a.fix=0,a.os="",a.onOrient=function(){},a.onChange=function(){},a.direction){case 0:a.fix=0;break;case 90:a.fix=-270;break;case-90:a.fix=-90}navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?a.os="ios":a.os=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux")?"android":""},a.prototype.bindEvent=function(){var a=this;window.addEventListener("deviceorientation",a.orientHandle.bind(a),!1),window.addEventListener("orientationchange",a.changeHandle.bind(a),!1)},a.prototype.changeHandle=function(){var a=this;a.direction=window.orientation,a.onChange(a.direction)},a.prototype.orientHandle=function(a){var n=this;switch(n.os){case"ios":switch(n.direction){case 0:n.lon=a.alpha+a.gamma,a.beta>0&&(n.lat=a.beta-90);break;case 90:a.gamma<0?n.lon=a.alpha-90:n.lon=a.alpha-270,a.gamma>0?n.lat=90-a.gamma:n.lat=-90-a.gamma;break;case-90:a.gamma<0?n.lon=a.alpha-90:n.lon=a.alpha-270,a.gamma<0?n.lat=90+a.gamma:n.lat=-90+a.gamma}break;case"android":switch(n.direction){case 0:n.lon=a.alpha+a.gamma+30,a.gamma>90?n.lat=90-a.beta:n.lat=a.beta-90;break;case 90:n.lon=a.alpha-230,a.gamma>0?n.lat=270-a.gamma:n.lat=-90-a.gamma;break;case-90:n.lon=a.alpha-180,n.lat=-90+a.gamma}}n.lon+=n.fix,n.lon%=360,n.lon<0&&(n.lon+=360),n.lon=Math.round(n.lon),n.lat=Math.round(n.lat),n.onOrient({a:Math.round(a.alpha),b:Math.round(a.beta),g:Math.round(a.gamma),lon:n.lon,lat:n.lat,dir:n.direction})},a});